<!-- file: page/vendor/manage_modal.html -->


<div class="modal fade" id="vendorModal" tabindex="-1" aria-labelledby="vendorModalLabel" aria-hidden="true" data-backdrop="static">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="vendorModalLabel"></h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      </div>
      <div class="modal-body">
        <div id="modal-loader" class="text-center py-5" style="display: none;">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status"><span class="sr-only">Loading...</span></div>
            <p class="mt-3">กำลังโหลดข้อมูล...</p>
        </div>
        <form id="vendorForm" style="display: block;">
          <input type="hidden" id="folderId">
          <input type="hidden" id="vendorId">

          <!--  ==========================================  -->
          <!--               VENDOR TAB LIST                -->
          <!--  ==========================================  -->    

          <ul class="nav nav-tabs" id="vendorTab" role="tablist">
            <li class="nav-item" role="presentation"><a class="nav-link active" id="general-tab" data-toggle="tab" href="#general" role="tab">ข้อมูลหลัก</a></li>
            <li class="nav-item" role="presentation"><a class="nav-link" id="company-tab" data-toggle="tab" href="#company" role="tab">ข้อมูลบริษัท</a></li>
            <li class="nav-item related-data-tab" role="presentation"><a class="nav-link" id="contacts-tab" data-toggle="tab" href="#contacts" role="tab">ผู้ติดต่อ</a></li>
            <li class="nav-item related-data-tab" role="presentation"><a class="nav-link" id="board-tab" data-toggle="tab" href="#board" role="tab">กรรมการ</a></li>
            <li class="nav-item related-data-tab" role="presentation"><a class="nav-link" id="finance-tab" data-toggle="tab" href="#finance" role="tab">การเงิน</a></li>
            <li class="nav-item related-data-tab" role="presentation"><a class="nav-link" id="projects-tab" data-toggle="tab" href="#projects" role="tab">โครงการอ้างอิง</a></li>
            <li class="nav-item" role="presentation"><a class="nav-link" id="files-tab" data-toggle="tab" href="#files" role="tab">เอกสารแนบ</a></li>
          </ul>

          <!--  ==========================================  -->
          <!--               VENDOR TAB CONTENTS                -->
          <!--  ==========================================  -->   

          <div class="tab-content pt-3">

            <div class="tab-pane fade show active" id="general" role="tabpanel">
              <div class="form-group"><label for="nameThai">ชื่อ (ไทย) <span class="text-danger">*</span></label><input type="text" class="form-control" id="nameThai" required></div>
              <div class="form-group"><label for="nameEnglish">ชื่อ (อังกฤษ)</label><input type="text" class="form-control" id="nameEnglish"></div>
              <div class="form-group">
                <label for="websiteUrl">Website URL</label>
                <input type="url" class="form-control" id="websiteUrl" placeholder="https://example.com">
              </div>
              <div class="form-group">
                <label for="socialUrl">Social URL</label>
                <input type="url" class="form-control" id="socialUrl" placeholder="https://facebook.com/example">
              </div>
              <div class="form-group"><label for="packageIds">ประเภทพัสดุที่เกี่ยวข้อง (Package) <span class="text-danger">*</span></label><select multiple class="form-control" id="packageIds" required></select><small class="form-text text-muted">กด Ctrl/Cmd ค้างไว้เพื่อเลือกหลายรายการ</small></div>
              <div class="form-group"><label for="status">สถานะ</label><select class="form-control" id="status"></select></div>
              <div class="form-group"><label for="remark">หมายเหตุ</label><textarea class="form-control" id="remark" rows="3"></textarea></div>
            </div>

            <div class="tab-pane fade" id="company" role="tabpanel">
                <div class="form-group">
                    <label for="companyTypeId">ประเภทบริษัท</label>
                    <select class="form-control" id="companyTypeId">
                        </select>
                </div>
                <div class="form-group"><label for="registeredCapital">ทุนจดทะเบียน</label><input type="number" class="form-control" id="registeredCapital"></div>
                <div class="form-group"><label for="registeredDate">วันที่จดทะเบียน</label><input type="date" class="form-control" id="registeredDate"></div>
                <div class="form-group"><label for="registeredObject">วัตถุประสงค์การจดทะเบียน</label><textarea class="form-control" id="registeredObject" rows="3"></textarea></div>
            </div>

            <div class="tab-pane fade" id="contacts" role="tabpanel">
                <div class="d-flex justify-content-between align-items-center mb-2"><h6 class="mb-0">รายชื่อผู้ติดต่อ</h6><button type="button" id="addContactBtn" class="btn btn-sm btn-outline-primary" onclick="prepareAddContactModal()"><i class="fas fa-plus"></i> เพิ่มผู้ติดต่อ</button></div>
                <table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>ชื่อ</th><th>ตำแหน่ง</th><th>เบอร์โทร</th><th>อีเมล</th><th>จัดการ</th></tr></thead><tbody id="vendor-contacts-table-body"></tbody></table>
            </div>

            <div class="tab-pane fade" id="board" role="tabpanel">
                <div class="d-flex justify-content-between align-items-center mb-2"><h6 class="mb-0">รายชื่อกรรมการ</h6><button type="button" id="addBoardMemberBtn" class="btn btn-sm btn-outline-primary" onclick="prepareAddBoardMemberModal()"><i class="fas fa-plus"></i> เพิ่มกรรมการ</button></div>
                <table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>ชื่อ</th><th>นามสกุล</th><th>จัดการ</th></tr></thead><tbody id="vendor-board-table-body"></tbody></table>
            </div>



            <!--  ==========================================  -->
            <!--               TAB > FINANCE                  -->
            <!--  ==========================================  -->   
            <div class="tab-pane fade" id="finance" role="tabpanel">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <h6 class="mb-0">ข้อมูลงบการเงิน</h6>
                <button type="button" id="addFinanceBtn" class="btn btn-sm btn-outline-primary" onclick="prepareAddFinanceModal()"><i class="fas fa-plus"></i> เพิ่มข้อมูลงบการเงิน</button>
              </div>
              <div class="table-responsive">
                <table class="table table-sm table-bordered">
                  <thead class="thead-light">
                    <tr>
                      <th>ปี</th>
                      <th>รายได้</th>
                      <th>สินทรัพย์หมุนเวียน</th>
                      <th>หนี้สินหมุนเวียน</th>
                      <th>หนี้สินรวม</th>
                      <th>จัดการ</th>
                    </tr>
                  </thead>
                  <tbody id="vendor-finance-table-body"></tbody>
                </table>
              </div>
            </div>

            <div class="tab-pane fade" id="projects" role="tabpanel">
              <div class="d-flex justify-content-between align-items-center mb-2">
                  <h6>โครงการอ้างอิง</h6>
                  <button type="button" id="addProjectBtn" class="btn btn-sm btn-outline-primary" onclick="prepareAddProjectModal()">
                      <i class="fas fa-plus"></i> เพิ่มโครงการ
                  </button>
              </div>
              <div class="table-responsive">
                  <table class="table table-sm table-bordered">
                      <thead class="thead-light">
                          <tr>
                              <th>ชื่อโครงการ</th>
                              <th>ประเภทโครงการ</th>
                              <th>เจ้าของโครงการ</th>
                              <th>ประเภทงาน</th>
                              <th>จัดการ</th>
                          </tr>
                      </thead>
                      <tbody id="vendor-projects-table-body"></tbody>
                  </table>
              </div>
            </div>


            <div class="tab-pane fade" id="files" role="tabpanel">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <p class="text-muted mb-0">อัปโหลดไฟล์ที่เกี่ยวข้อง (PDF หรือรูปภาพ)</p>
                    <a id="vendor-folder-link" href="#" target="_blank" class="btn btn-sm btn-info" style="display: none;">
                        <i class="fas fa-folder-open mr-2"></i>เปิดโฟลเดอร์หลัก
                    </a>
                </div>

                <table class="table table-bordered">
                    <thead class="thead-light">
                        <tr>
                            <th style="width:40%;">ประเภทเอกสาร</th>
                            <th style="width:30%;">ไฟล์ที่แนบไว้</th>
                            <th style="width:30%;">อัปโหลดไฟล์ใหม่</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1. เอกสารข้อมูลบริษัท</td>
                            <td>
                                <div id="companyProfileFileLinkContainer" style="display:none;">
                                    <a href="#" id="companyProfileFileLink" target="_blank" class="btn btn-sm btn-outline-primary"><i class="fas fa-folder-open mr-2"></i> เปิดโฟลเดอร์</a>
                                </div>
                                <span id="noCompanyProfileFile" class="text-muted">ยังไม่มีไฟล์</span>
                            </td>
                            <td><input type="file" class="form-control-file form-control-sm" id="companyProfileFile"></td>
                        </tr>
                        <tr>
                            <td>2. บัตรประชาชน</td>
                            <td>
                                <div id="idCardFileLinkContainer" style="display:none;">
                                    <a href="#" id="idCardFileLink" target="_blank" class="btn btn-sm btn-outline-primary"><i class="fas fa-folder-open mr-2"></i> เปิดโฟลเดอร์</a>
                                </div>
                                <span id="noIdCardFile" class="text-muted">ยังไม่มีไฟล์</span>
                            </td>
                            <td><input type="file" class="form-control-file form-control-sm" id="idCardFile"></td>
                        </tr>
                        <tr>
                            <td>3. หนังสือรับรองบริษัท</td>
                            <td>
                                <div id="companyCertFileLinkContainer" style="display:none;">
                                    <a href="#" id="companyCertFileLink" target="_blank" class="btn btn-sm btn-outline-primary"><i class="fas fa-folder-open mr-2"></i> เปิดโฟลเดอร์</a>
                                </div>
                                <span id="noCompanyCertFile" class="text-muted">ยังไม่มีไฟล์</span>
                            </td>
                            <td><input type="file" class="form-control-file form-control-sm" id="companyCertFile"></td>
                        </tr>
                        <tr>
                            <td>4. ใบทะเบียนภาษีมูลค่าเพิ่ม (ภพ.20)</td>
                            <td>
                                <div id="vatCertFileLinkContainer" style="display:none;">
                                    <a href="#" id="vatCertFileLink" target="_blank" class="btn btn-sm btn-outline-primary"><i class="fas fa-folder-open mr-2"></i> เปิดโฟลเดอร์</a>
                                </div>
                                <span id="noVatCertFile" class="text-muted">ยังไม่มีไฟล์</span>
                            </td>
                            <td><input type="file" class="form-control-file form-control-sm" id="vatCertFile"></td>
                        </tr>
                        <tr>
                            <td>5. สมุดบัญชีธนาคาร</td>
                            <td>
                                <div id="bookBankFileLinkContainer" style="display:none;">
                                    <a href="#" id="bookBankFileLink" target="_blank" class="btn btn-sm btn-outline-primary"><i class="fas fa-folder-open mr-2"></i> เปิดโฟลเดอร์</a>
                                </div>
                                <span id="noBookBankFile" class="text-muted">ยังไม่มีไฟล์</span>
                            </td>
                            <td><input type="file" class="form-control-file form-control-sm" id="bookBankFile"></td>
                        </tr>
                    </tbody>
                </table>
            </div>


          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">ยกเลิก</button>
        <button type="button" id="saveVendorButton" class="btn btn-primary">บันทึก</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="contactModal" tabindex="-1" aria-labelledby="contactModalLabel" aria-hidden="true" data-backdrop="static">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header"><h5 class="modal-title" id="contactModalLabel">ข้อมูลผู้ติดต่อ</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>
      <div class="modal-body">
        <form id="contactForm">
          <input type="hidden" id="contactId"><input type="hidden" id="contactVendorId">
          <div class="form-group"><label for="contactName">ชื่อ-สกุล <span class="text-danger">*</span></label><input type="text" class="form-control" id="contactName" required></div>
          <div class="form-group"><label for="contactPosition">ตำแหน่ง</label><input type="text" class="form-control" id="contactPosition"></div>
          <div class="form-group"><label for="contactEmail">อีเมล</label><input type="email" class="form-control" id="contactEmail"></div>
          <div class="form-group"><label for="contactPhoneNumber">เบอร์โทรศัพท์</label><input type="text" class="form-control" id="contactPhoneNumber"></div>
          <div class="form-group"><label for="contactLineId">LINE ID</label><input type="text" class="form-control" id="contactLineId"></div>
        </form>
      </div>
      <div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">ยกเลิก</button><button type="button" id="saveContactButton" class="btn btn-primary">บันทึกผู้ติดต่อ</button></div>
    </div>
  </div>
</div>

<div class="modal fade" id="boardMemberModal" tabindex="-1" aria-labelledby="boardMemberModalLabel" aria-hidden="true" data-backdrop="static">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header"><h5 class="modal-title" id="boardMemberModalLabel">ข้อมูลกรรมการ</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>
      <div class="modal-body">
        <form id="boardMemberForm">
          <input type="hidden" id="boardMemberId"><input type="hidden" id="boardMemberVendorId">
          <div class="form-group"><label for="boardMemberName">ชื่อจริง <span class="text-danger">*</span></label><input type="text" class="form-control" id="boardMemberName" required></div>
          <div class="form-group"><label for="boardMemberSurname">นามสกุล <span class="text-danger">*</span></label><input type="text" class="form-control" id="boardMemberSurname" required></div>
        </form>
      </div>
      <div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">ยกเลิก</button><button type="button" id="saveBoardMemberButton" class="btn btn-primary">บันทึกข้อมูล</button></div>
    </div>
  </div>
</div>


<!-- Form แก้ไข งบการเงิน -->
<div class="modal fade" id="financeModal" tabindex="-1" aria-labelledby="financeModalLabel" aria-hidden="true" data-backdrop="static">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header"><h5 class="modal-title" id="financeModalLabel">ข้อมูลงบการเงิน</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>
      <div class="modal-body">
        <div id="finance-modal-loader" class="text-center py-5" style="display: none;">
            <div class="spinner-border text-primary" role="status"><span class="sr-only">Loading...</span></div>
            <p class="mt-2">กำลังโหลดข้อมูล...</p>
        </div>
        <form id="financeForm" style="display: block;">
          <input type="hidden" id="financeId"><input type="hidden" id="financeVendorId">
          <div class="row">
            <div class="col-md-6 form-group"><label for="financeYear">ปีงบประมาณ <span class="text-danger">*</span></label><input type="number" class="form-control" id="financeYear" placeholder="ระบุปี ค.ศ. เช่น 2025" required></div>
            <div class="col-md-6 form-group"><label for="financeRevenue">รายได้</label><input type="number" class="form-control" id="financeRevenue" step="0.01"></div>
          </div>
          <div class="row">
            <div class="col-md-4 form-group"><label for="financeCurrentAssets">สินทรัพย์หมุนเวียน</label><input type="number" class="form-control" id="financeCurrentAssets" step="0.01"></div>
            <div class="col-md-4 form-group"><label for="financeCurrentLiabilities">หนี้สินหมุนเวียน</label><input type="number" class="form-control" id="financeCurrentLiabilities" step="0.01"></div>
            <div class="col-md-4 form-group"><label for="financeTotalLiabilities">หนี้สินรวม</label><input type="number" class="form-control" id="financeTotalLiabilities" step="0.01"></div>
          </div>
        </form>
      </div>
      <div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">ยกเลิก</button><button type="button" id="saveFinanceButton" class="btn btn-primary">บันทึก</button></div>
    </div>
  </div>
</div>



<div class="modal fade" id="projectModal" tabindex="-1" aria-labelledby="projectModalLabel" aria-hidden="true" data-backdrop="static">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header"><h5 class="modal-title" id="projectModalLabel">เพิ่มโครงการอ้างอิง</h5><button type="button" class="close" data-dismiss="modal">&times;</button></div>
      <div class="modal-body">
      

        <form id="projectForm">
          <input type="hidden" id="projectId"><input type="hidden" id="projectVendorId">
          <div class="form-group">
            <label for="projectName">ชื่อโครงการ <span class="text-danger">*</span></label>
            <input type="text" class="form-control" id="projectName" required>
          </div>
          <div class="row">
            <div class="col-md-6 form-group">
                <label for="projectTypeId">ประเภทโครงการ <span class="text-danger">*</span></label>
                <select class="form-control" id="projectTypeId" required></select>
            </div>
            <div class="col-md-6 form-group">
                <label for="projectYear">ปีที่ทำโครงการ</label>
                <input type="number" class="form-control" id="projectYear" placeholder="ระบุปี ค.ศ. เช่น 2025">
            </div>
          </div>

          <div class="form-group">
            <label for="projectOwnerId">เจ้าของโครงการ <span class="text-danger">*</span></label>
            <div class="input-group">
                <select class="form-control" id="projectOwnerId">
                    <option value="">-- กรุณาเลือก --</option>
                    <option value="other">อื่นๆ (โปรดระบุ)</option>
                </select>
                <div class="input-group-append">
                    <button class="btn btn-outline-success" type="button" id="addNewProjectOwnerBtn" title="เพิ่มเจ้าของโครงการใหม่">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </div>
          </div>

          <div class="form-group" id="projectOwnerCustomGroup" style="display: none;">
              <label for="projectOwnerCustom">ระบุชื่อเจ้าของโครงการ</label>
              <input type="text" class="form-control" id="projectOwnerCustom">
          </div>
          <div class="form-group">
              <label for="projectPackageIds">ประเภทงานที่ทำ (Package) <span class="text-danger">*</span></label>
              <select multiple class="form-control" id="projectPackageIds" required></select>
              <small class="form-text text-muted">กด Ctrl/Cmd ค้างไว้เพื่อเลือกหลายรายการ</small>
          </div>
          <div class="form-group">
              <label for="contractValue">มูลค่าสัญญา</label>
              <input type="number" class="form-control" id="contractValue" step="0.01">
          </div>
          <div class="form-group">
              <label for="projectDescription">รายละเอียดโครงการ</label>
              <textarea class="form-control" id="projectDescription" rows="3"></textarea>
          </div>
        </form>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">ยกเลิก</button>
        <button type="button" id="saveProjectButton" class="btn btn-primary">บันทึก</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="projectOwnerSubModal" tabindex="-1" role="dialog" data-backdrop="static">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">เพิ่มข้อมูลเจ้าของโครงการใหม่</h5>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="projectOwnerSubForm">
                    <div class="form-group"><label>ชื่อ (ไทย)*</label><input type="text" id="sub_nameThai" class="form-control" required></div>
                    <div class="form-group"><label>ชื่อ (อังกฤษ)</label><input type="text" id="sub_nameEnglish" class="form-control"></div>
                    <div class="form-group"><label>ชื่อเล่น</label><input type="text" id="sub_nickname" class="form-control"></div>
                    <div class="form-group"><label>ประเภทบริษัท</label><select id="sub_companyTypeId" class="form-control"></select></div>
                    <div class="form-group">
                        <div class="custom-control custom-checkbox">
                           <input type="checkbox" class="custom-control-input" id="sub_isLargeCompany">
                           <label class="custom-control-label" for="sub_isLargeCompany">เป็นบริษัทขนาดใหญ่</label>
                        </div>
                    </div>
                    <div class="form-group"><label>หมายเหตุ</label><textarea id="sub_remark" class="form-control" rows="2"></textarea></div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">ยกเลิก</button>
                <button type="button" id="saveNewProjectOwnerBtn" class="btn btn-primary">บันทึก</button>
            </div>
        </div>
    </div>
</div>

